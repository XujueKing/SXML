<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 安全策略 (CSP) - 使用 nonce 替代 unsafe-inline/unsafe-eval -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'nonce-6ynCU98R9FjNnDhHH0HCLA=='; style-src 'self' 'nonce-6ynCU98R9FjNnDhHH0HCLA=='; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.example.com wss://api.example.com https://ipapi.co https://api.ipify.org; frame-ancestors 'none'; base-uri 'self'; form-action 'self';">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
  
  <meta name="sxml-compiled" content="true">
  <!-- 防止缓存 -->
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>{{APP_TITLE}}</title>
  
  <!-- 连接优化：预解析与预连接，降低握手延迟 -->
  <link rel="dns-prefetch" href="//api.example.com" />
  <link rel="preconnect" href="https://api.example.com" crossorigin />
  <link rel="dns-prefetch" href="//ipapi.co" />
  <link rel="preconnect" href="https://ipapi.co" crossorigin />
  <link rel="dns-prefetch" href="//api.ipify.org" />
  <link rel="preconnect" href="https://api.ipify.org" crossorigin />
  
  <!-- 预加载关键CSS，防止FOUC（无样式内容闪烁）-->
  <link rel="preload" href="../../css/element.css" as="style" />
  <link rel="stylesheet" type="text/css" href="../../css/element.css" />
  <link rel="preload" href="./index.css" as="style" />
  <link rel="stylesheet" type="text/css" href="./index.css" />
  <link rel="icon" href="../../images/logo1.png" type="image/x-icon" />
  
  <!-- 防止页面闪烁的内联关键CSS -->
  <style nonce="6ynCU98R9FjNnDhHH0HCLA==">
    /* 首屏淡入 */
    body { 
      opacity: 0; 
      transition: opacity 0.3s ease-in;
    }
    body.loaded { 
      opacity: 1; 
    }
    /* 仅隐藏需要替换文本内容的元素，避免把 input/button 等交互控件隐藏 */
    [data-i18n],
    [data-i18n-html] {
      visibility: hidden;
    }
    .i18n-ready [data-i18n],
    .i18n-ready [data-i18n-html] {
      visibility: visible;
    }
  </style>

</head>
<body>
<!-- SXML Compiled at 2025-11-02T03:24:37.588Z -->

<!-- 首页入口（SXML）-->

<div class="container">
  <div class="hero">
    
    <div class="title">{{ APP_TITLE }}</div>
    <div class="subtitle">{{ APP_SUBTITLE }}</div>
    
  </div>

  <div class="actions">
    <button class="primary" onclick="currentPage.goLogin(event)">登录</button>
    <button class="secondary" onclick="currentPage.goMyInfo(event)">我的信息</button>
  </div>

  <div class="footnote">
    <span>© {{ CURRENT_YEAR }} {{ APP_NAME }}</span>
  </div>
</div>


  <!-- 动态依赖库（根据页面实际使用智能引入）-->
    <!-- API 签名映射配置（必须在 config.js 之前加载）-->
    <script type="text/javascript" src="../../config/api-sign-map.js"></script>
    <script nonce="6ynCU98R9FjNnDhHH0HCLA==">window.APP_CONFIG_URL = '../../config/app.config.json';</script>
    <script type="text/javascript" src="../../utils/config.js"></script>
    <script type="text/javascript" src="../../utils/logger.js"></script>
    <script type="text/javascript" src="../../utils/toast.js"></script>
    <script type="text/javascript" src="../../utils/page.js"></script>
    <script type="text/javascript" src="../../utils/onload.js"></script>
    <script type="text/javascript" src="../../utils/sxml.parser.js"></script>
  <!-- 页面加载器 -->
    <script nonce="6ynCU98R9FjNnDhHH0HCLA==">window.SXML_PRECOMPILED = true;</script>
    <script type="text/javascript" src="../../utils/page.loader.js"></script>
    
  <!-- 页面加载完成后显示内容：优先等待 i18n 就绪，最多延迟 800ms -->
    <script nonce="6ynCU98R9FjNnDhHH0HCLA==">
      (function(){
        // 反爬虫检测：检测自动化工具特征
        function detectBot() {
          // 检测 Headless 浏览器
          if (navigator.webdriver) return true;
          
          // 检测 Puppeteer/Playwright
          if (window.navigator.plugins.length === 0) return true;
          
          // 检测常见爬虫 User-Agent
          const ua = navigator.userAgent.toLowerCase();
          const botPatterns = ['bot', 'crawl', 'spider', 'scrape', 'python', 'requests', 'urllib', 'scrapy', 'selenium', 'phantomjs'];
          if (botPatterns.some(pattern => ua.includes(pattern))) return true;
          
          // 检测不正常的屏幕尺寸
          if (screen.width === 0 || screen.height === 0) return true;
          
          // 检测缺少常见浏览器对象
          if (!window.chrome && !window.safari && !window.opera && !/firefox/i.test(ua)) {
            if (!/edge/i.test(ua) && !/msie|trident/i.test(ua)) return true;
          }
          
          return false;
        }
        
        // 生成设备指纹
        function generateFingerprint() {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          ctx.textBaseline = 'top';
          ctx.font = '14px Arial';
          ctx.fillText('browser fingerprint', 2, 2);
          return canvas.toDataURL().slice(-50);
        }
        
        // 如果检测到机器人，隐藏内容或重定向
        if (detectBot()) {
          document.body.innerHTML = '<div style="padding:50px;text-align:center;"><h1>Access Denied</h1><p>Automated access is not allowed.</p></div>';
          console.error('Bot detected');
          return;
        }
        
        // 生成并存储设备指纹（用于后端验证）
        try {
          const fp = generateFingerprint();
          sessionStorage.setItem('_dfp', fp);
        } catch (e) { /* ignore */ }
        
        function reveal(){
          if (!document.body.classList.contains('loaded')) {
            document.body.classList.add('loaded');
          }
        }
        // 若 i18n 存在，等待其就绪事件，确保翻译文本已应用再显示
        if (window.i18n) {
          if (document.documentElement.classList.contains('i18n-ready')) {
            reveal();
          } else {
            window.addEventListener('i18n:ready', reveal, { once: true });
            // 兜底：若 800ms 内未就绪也先显示，避免白屏过久
            setTimeout(reveal, 800);
          }
        } else {
          // 无 i18n 时按 DOMContentLoaded 或立即显示
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', reveal);
          } else {
            reveal();
          }
        }
      })();
    </script>
</body>
</html>